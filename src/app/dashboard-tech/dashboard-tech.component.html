<style>
</style>
<section id="contact" class="contact" style="margin-top: 100px;">
    <div class="container">

      <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
          <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Commande en attente</button>
          <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Commande en cours</button>
          <button class="nav-link" id="nav-history-tab" data-bs-toggle="tab" data-bs-target="#nav-history" type="button" role="tab" aria-controls="nav-history" aria-selected="false">Historique</button>
        </div>
      </nav>
      <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab" >
          <div *ngIf="connected.availability != 'free'">
            Il n'y a pas de commandes pour vous ou vous n'êtes pas disponible !
          </div>
          <table class="table table-striped table-hover" *ngIf="connected.availability == 'free'" style="color: #3498db;">
            <tr>
            <th>Nom</th>
            <th>Email</th>
            <th>Tel</th>
            <th>Gouvernorat</th>
            <th>Adresse</th>
            <th>Actions</th>
            </tr>
                <!-- <ng-container *ngIf="connected.availability == '1'"> -->
                  <ng-container *ngFor="let o of orders">
                    <tr *ngIf="o.zone == connected.zone && o.service == connected.speciality && o.status == 'pending' && !connected.declanations.includes(o._id)">
                      <ng-container *ngFor="let c of clients" >
                       
                        
                            <td *ngIf="o.idClient == c._id">{{c.name}}</td>
                            <td *ngIf="o.idClient == c._id">{{c.email}}</td>
                            <td *ngIf="o.idClient == c._id">{{c.tel}}</td>
                      </ng-container>
                       
                        <td>{{o.zone}}</td>
                        <td>{{o.adress}}</td>
                        <td>
                            <button type="button" class="btn btn-outline-danger" id="dashB" (click)="decline(o)" style="color: #3498db;">Reffuser</button>
                            <button type="button" class="btn btn-outline-info" (click)="approveOrder(o)" >Accepter</button>
                        </td>
                      
                    </tr>
                  </ng-container>
                <!-- </ng-container> -->
              
               
              
            
          
            
          </table>
        </div>
        <div class="tab-pane fade show " id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab" >
          <table class="table table-striped table-hover"  style="color: #3498db;">
            <tr >
            <th>Nom</th>
            <th>Email</th>
            <th>Tel</th>
            <th>Gouvernorat</th>
            <th>Adresse</th>
            <th>Actions</th>
            </tr>
               
                  <ng-container *ngFor="let o of orders">
                    <tr *ngIf="o.idTech == connected._id && o.status == 'confirmed' ">
                      <ng-container *ngFor="let c of clients" >
                       
                        
                            <td *ngIf="o.idClient == c._id">{{c.name}}</td>
                            <td *ngIf="o.idClient == c._id">{{c.email}}</td>
                            <td *ngIf="o.idClient == c._id">{{c.tel}}</td>
                      </ng-container>
                       
                        <td>{{o.zone}}</td>
                        <td>{{o.adress}}</td>
                        <td>
                            <button type="button" class="btn btn-outline-info" (click)="finish(o._id)">travail terminé</button>
                        </td>
                      
                    </tr>
                  </ng-container>
               
              
               
              
            
          
            
          </table>
        </div>
        <div class="tab-pane fade show " id="nav-history" role="tabpanel" aria-labelledby="nav-history-tab" >
          <table class="table table-striped table-hover" style="color: #3498db;">
            <tr >
            <th>Nom</th>
            <th>Email</th>
            <th>Tel</th>
            <th>Gouvernorat</th>
            <th>Adresse</th>
            <th>Avis</th>
            </tr>
               
                  <ng-container *ngFor="let o of orders">
                    <tr *ngIf="o.idTech == connected._id && o.status == 'finished' ">
                      <ng-container *ngFor="let c of clients" >
                       
                        
                            <td *ngIf="o.idClient == c._id">{{c.name}}</td>
                            <td *ngIf="o.idClient == c._id">{{c.email}}</td>
                            <td *ngIf="o.idClient == c._id">{{c.tel}}</td>
                      </ng-container>
                       
                        <td>{{o.zone}}</td>
                        <td>{{o.adress}}</td>
                        <td>
                          <div *ngIf="o.rating == 'unrated'">
                            -----
                          </div>
                          <div *ngIf="o.rating == 'like'">
                            <img src="assets/icons/happy.png" alt="" style="height: 30px;">
                          </div>
                          <div *ngIf="o.rating == 'dislike'">
                            <img src="assets/icons/angry.png" alt="" style="height: 30px;">
                          </div>
                        </td>
                        
                        
                        
                      
                    </tr>
                  </ng-container>
               
              
               
              
            
          
            
          </table>
        </div>
        
      


      </div>
      



  </div>
  </section>
  